version: api.keploy.io/v1beta2
kind: Http
name: TestOperations_UpdateVM
spec:
    metadata:
        name: Http
        operation: GET
        type: HTTP_CLIENT
    req:
        method: GET
        proto_major: 1
        proto_minor: 1
        url: https://prism-test.nutanix.com:9440/api/nutanix/v3/vms/bdbbad7a-a401-4f9a-a789-2b8406905b56
        header:
            Accept: application/json
            Content-Type: application/json
            User-Agent: nutanix/v3
        body: ""
        body_type: utf-8
    resp:
        status_code: 200
        header:
            Content-Security-Policy: 'connect-src ''self'' wss: https://downloads.frame.nutanix.com https://downloads.frame.nutanix.us; default-src ''self'' https://*.nutanix.com; frame-ancestors ''self'' https://*.nutanix.com; frame-src ''self'' https://*.nutanix.com blob: data:; img-src ''self'' blob: data:; script-src ''self'' ''unsafe-inline'' ''unsafe-eval''; style-src ''self'' ''unsafe-inline'''
            Content-Type: application/json
            Date: Sat, 07 Jun 2025 22:49:40 GMT
            Server: envoy
            Set-Cookie: Expires=Sat, 07-Jun-2025 23:04:00 GMT;Path=/;Secure;HttpOnly;SameSite=Lax
            Strict-Transport-Security: max-age=8640000:includeSubdomains
            Vary: Origin, Accept-Encoding
            X-Content-Type-Options: nosniff
            X-Dns-Prefetch-Control: "off"
            X-Envoy-Upstream-Service-Time: "430"
            X-Frame-Options: SAMEORIGIN
            X-Ntnx-Env: pc
            X-Ntnx-Product: pc.2024.3.0.1
            X-Permitted-Cross-Domain-Policies: master-only
            X-Xss-Protection: 1; mode=block
        body: '{"metadata": {"kind": "vm", "project_reference": {"kind": "project", "name": "_internal", "uuid": "f33d30fb-12f1-4afa-b393-b195a259fcd6"}, "uuid": "bdbbad7a-a401-4f9a-a789-2b8406905b56", "spec_version": 0, "categories": {}, "categories_mapping": {}, "creation_time": "2025-06-07T18:23:52Z", "last_update_time": "2025-06-07T18:23:52Z", "owner_reference": {"kind": "user", "name": "cswdjlnxgfji", "uuid": "1b223294-26c6-5241-919a-bafd1dc0b48f"}, "entity_version": "1"}, "spec": {"name": "test-vm", "description": "test-vm-description", "resources": {"apc_config": {"enabled": false}, "num_sockets": 1, "num_vcpus_per_socket": 1, "num_threads_per_core": 1, "memory_size_mib": 1024, "memory_overcommit_enabled": false, "gpu_console_enabled": false, "is_vcpu_hard_pinned": false, "power_state": "OFF", "power_state_mechanism": {"mechanism": "HARD", "guest_transition_config": {"enable_script_exec": false, "should_fail_on_script_failure": false}}, "hardware_clock_timezone": "UTC", "is_agent_vm": false, "disable_branding": false, "enable_cpu_passthrough": false, "machine_type": "PC", "hardware_virtualization_enabled": false, "vtpm_config": {"vtpm_enabled": false}, "disk_list": [{"uuid": "537e0352-0af0-4aa5-af01-28e5964c5e80", "device_properties": {"disk_address": {"adapter_type": "SCSI", "device_index": 0}, "device_type": "DISK"}, "disk_size_mib": 8192, "disk_size_bytes": 8589934592, "data_source_reference": {"kind": "image", "uuid": "70cfd137-a8d9-4169-a5ac-cf9ad6ddb03a"}, "storage_config": {"storage_container_reference": {"kind": "storage_container", "uuid": "8a77ce4a-5730-44ea-a281-4c81b1277333", "name": "SelfServiceContainer"}}}], "nic_list": [{"uuid": "22a6684a-c8be-49f8-b679-5fca3ac1d4ae", "nic_type": "NORMAL_NIC", "vlan_mode": "ACCESS", "trunked_vlan_list": [], "num_queues": 1, "mac_address": "50:6b:8d:24:19:54", "ip_endpoint_list": [{"type": "ASSIGNED", "ip": "10.23.129.96"}], "subnet_reference": {"kind": "subnet", "name": "vlan173", "uuid": "b2e46975-2cde-4a49-9dda-815eb4fcd679"}, "is_connected": true}], "gpu_list": [], "boot_config": {"boot_device_order_list": ["CDROM", "DISK", "NETWORK"], "boot_type": "UEFI"}, "vga_console_enabled": true, "vnuma_config": {"num_vnuma_nodes": 0}, "serial_port_list": [], "cpu_hotplug_enabled": true, "scsi_controller_enabled": true}, "cluster_reference": {"kind": "cluster", "name": "ncn-dev-sandbox", "uuid": "00061f7f-44f7-19dc-3be1-7cc25586ee44"}}, "status": {"name": "test-vm", "description": "test-vm-description", "state": "COMPLETE", "resources": {"apc_config": {"enabled": false}, "num_sockets": 1, "num_vcpus_per_socket": 1, "num_threads_per_core": 1, "memory_size_mib": 1024, "memory_overcommit_enabled": false, "gpu_console_enabled": false, "generation_uuid": "ebab5166-a248-4e29-b5bf-fdacf8996a80", "bios_uuid": "bdbbad7a-a401-4f9a-a789-2b8406905b56", "is_vcpu_hard_pinned": false, "hypervisor_type": "AHV", "power_state": "OFF", "power_state_mechanism": {"mechanism": "HARD", "guest_transition_config": {"enable_script_exec": false, "should_fail_on_script_failure": false}}, "hardware_clock_timezone": "UTC", "is_agent_vm": false, "disable_branding": false, "enable_cpu_passthrough": false, "machine_type": "PC", "hardware_virtualization_enabled": false, "vtpm_config": {"vtpm_enabled": false, "version": ""}, "disk_list": [{"uuid": "537e0352-0af0-4aa5-af01-28e5964c5e80", "device_properties": {"disk_address": {"adapter_type": "SCSI", "device_index": 0}, "device_type": "DISK"}, "disk_size_mib": 8192, "disk_size_bytes": 8589934592, "data_source_reference": {"kind": "image", "uuid": "70cfd137-a8d9-4169-a5ac-cf9ad6ddb03a"}, "storage_config": {"storage_container_reference": {"kind": "storage_container", "uuid": "8a77ce4a-5730-44ea-a281-4c81b1277333", "name": "SelfServiceContainer"}}, "is_migration_in_progress": false}], "nic_list": [{"uuid": "22a6684a-c8be-49f8-b679-5fca3ac1d4ae", "nic_type": "NORMAL_NIC", "vlan_mode": "ACCESS", "trunked_vlan_list": [], "num_queues": 1, "mac_address": "50:6b:8d:24:19:54", "ip_endpoint_list": [{"type": "ASSIGNED", "ip": "10.23.129.96"}], "subnet_reference": {"kind": "subnet", "name": "vlan173", "uuid": "b2e46975-2cde-4a49-9dda-815eb4fcd679"}, "is_connected": true}], "gpu_list": [], "boot_config": {"boot_device_order_list": ["CDROM", "DISK", "NETWORK"], "boot_type": "UEFI"}, "vga_console_enabled": true, "cpu_hotplug_enabled": true, "scsi_controller_enabled": true, "protection_type": "UNPROTECTED", "vnuma_config": {"num_vnuma_nodes": 0}, "serial_port_list": []}, "cluster_reference": {"kind": "cluster", "name": "ncn-dev-sandbox", "uuid": "00061f7f-44f7-19dc-3be1-7cc25586ee44"}, "execution_context": {"task_uuid": ["e074cb94-1123-4dca-82b0-b842f019a825"]}}, "api_version": "3.1"}'
        body_type: utf-8
        status_message: ""
        proto_major: 0
        proto_minor: 0
    objects:
        - type: error
          data: H4sIAAAAAAAA/wEAAP//AAAAAAAAAAA=
---
version: api.keploy.io/v1beta2
kind: Http
name: TestOperations_UpdateVM
spec:
    metadata:
        name: Http
        operation: PUT
        type: HTTP_CLIENT
    req:
        method: PUT
        proto_major: 1
        proto_minor: 1
        url: https://prism-test.nutanix.com:9440/api/nutanix/v3/vms/bdbbad7a-a401-4f9a-a789-2b8406905b56
        header:
            Accept: application/json
            Content-Type: application/json
            User-Agent: nutanix/v3
        body: |
            {"metadata":{"kind":"vm","spec_version":1},"spec":{"cluster_reference":{"kind":"cluster","name":"ncn-dev-sandbox","uuid":"00061f7f-44f7-19dc-3be1-7cc25586ee44"},"description":"updated-test-vm-description","name":"test-vm","resources":{"apc_config":{"enabled":false},"boot_config":{"boot_device_order_list":["CDROM","DISK","NETWORK"],"boot_type":"UEFI"},"disk_list":[{"data_source_reference":{"kind":"image","uuid":"70cfd137-a8d9-4169-a5ac-cf9ad6ddb03a"},"device_properties":{"device_type":"DISK","disk_address":{"adapter_type":"SCSI","device_index":0}},"disk_size_bytes":8589934592,"disk_size_mib":8192,"storage_config":{"storage_container_reference":{"kind":"storage_container","name":"SelfServiceContainer","uuid":"8a77ce4a-5730-44ea-a281-4c81b1277333"}},"uuid":"537e0352-0af0-4aa5-af01-28e5964c5e80"}],"gpu_list":[],"hardware_clock_timezone":"UTC","machine_type":"PC","memory_size_mib":1024,"nic_list":[{"ip_endpoint_list":[{"gateway_address_list":[],"ip":"10.23.129.96","type":"ASSIGNED"}],"is_connected":true,"mac_address":"50:6b:8d:24:19:54","nic_type":"NORMAL_NIC","num_queues":1,"secondary_ip_address_list":[],"subnet_reference":{"kind":"subnet","name":"vlan173","uuid":"b2e46975-2cde-4a49-9dda-815eb4fcd679"},"trunked_vlan_list":[],"uuid":"22a6684a-c8be-49f8-b679-5fca3ac1d4ae","vlan_mode":"ACCESS"}],"num_sockets":1,"num_threads_per_core":1,"num_vcpus_per_socket":1,"power_state":"OFF","power_state_mechanism":{"guest_transition_config":{},"mechanism":"HARD"},"serial_port_list":[],"vga_console_enabled":true,"vnuma_config":{},"vtpm_config":{}}}}
        body_type: utf-8
    resp:
        status_code: 202
        header:
            Content-Security-Policy: 'connect-src ''self'' wss: https://downloads.frame.nutanix.com https://downloads.frame.nutanix.us; default-src ''self'' https://*.nutanix.com; frame-ancestors ''self'' https://*.nutanix.com; frame-src ''self'' https://*.nutanix.com blob: data:; img-src ''self'' blob: data:; script-src ''self'' ''unsafe-inline'' ''unsafe-eval''; style-src ''self'' ''unsafe-inline'''
            Content-Type: application/json
            Date: Sat, 07 Jun 2025 22:49:44 GMT
            Server: envoy
            Set-Cookie: Expires=Sat, 07-Jun-2025 23:04:00 GMT;Path=/;Secure;HttpOnly;SameSite=Lax
            Strict-Transport-Security: max-age=8640000:includeSubdomains
            Vary: Origin, Accept-Encoding
            X-Content-Type-Options: nosniff
            X-Dns-Prefetch-Control: "off"
            X-Envoy-Upstream-Service-Time: "464"
            X-Frame-Options: SAMEORIGIN
            X-Ntnx-Env: pc
            X-Ntnx-Product: pc.2024.3.0.1
            X-Permitted-Cross-Domain-Policies: master-only
            X-Xss-Protection: 1; mode=block
        body: '{"metadata": {"use_categories_mapping": false, "kind": "vm", "spec_version": 0, "uuid": "bdbbad7a-a401-4f9a-a789-2b8406905b56"}, "api_version": "3.1", "spec": {"description": "updated-test-vm-description", "resources": {"num_threads_per_core": 1, "memory_size_mib": 1024, "boot_config": {"boot_device_order_list": ["CDROM", "DISK", "NETWORK"], "boot_type": "UEFI"}, "disk_list": [{"storage_config": {"storage_container_reference": {"kind": "storage_container", "uuid": "8a77ce4a-5730-44ea-a281-4c81b1277333", "name": "SelfServiceContainer"}}, "device_properties": {"disk_address": {"device_index": 0, "adapter_type": "SCSI"}, "device_type": "DISK"}, "uuid": "537e0352-0af0-4aa5-af01-28e5964c5e80", "data_source_reference": {"kind": "image", "uuid": "70cfd137-a8d9-4169-a5ac-cf9ad6ddb03a"}, "disk_size_mib": 8192, "disk_size_bytes": 8589934592}], "serial_port_list": [], "power_state": "OFF", "vnuma_config": {}, "num_vcpus_per_socket": 1, "num_sockets": 1, "gpu_list": [], "machine_type": "PC", "hardware_clock_timezone": "UTC", "power_state_mechanism": {"guest_transition_config": {}, "mechanism": "HARD"}, "vga_console_enabled": true, "nic_list": [{"nic_type": "NORMAL_NIC", "uuid": "22a6684a-c8be-49f8-b679-5fca3ac1d4ae", "ip_endpoint_list": [{"ip": "10.23.129.96", "type": "ASSIGNED", "gateway_address_list": []}], "num_queues": 1, "secondary_ip_address_list": [], "mac_address": "50:6b:8d:24:19:54", "vlan_mode": "ACCESS", "subnet_reference": {"kind": "subnet", "name": "vlan173", "uuid": "b2e46975-2cde-4a49-9dda-815eb4fcd679"}, "is_connected": true, "trunked_vlan_list": []}], "apc_config": {"enabled": false}, "vtpm_config": {}}, "cluster_reference": {"kind": "cluster", "name": "ncn-dev-sandbox", "uuid": "00061f7f-44f7-19dc-3be1-7cc25586ee44"}, "name": "test-vm"}, "status": {"state": "PENDING", "execution_context": {"task_uuid": "3220cf7e-2bc4-418d-9b7a-7fd1da44060e"}}}'
        body_type: utf-8
        status_message: ""
        proto_major: 0
        proto_minor: 0
    objects:
        - type: error
          data: H4sIAAAAAAAA/wEAAP//AAAAAAAAAAA=
